# ReactJS |虚拟 DOM

> 原文:[https://www.geeksforgeeks.org/reactjs-virtual-dom/](https://www.geeksforgeeks.org/reactjs-virtual-dom/)

**DOM:** DOM 代表‘文档对象模型’。简单来说，它是网页或网络应用程序中存在的 HTML 元素的结构化表示。DOM 代表应用程序的整个用户界面。DOM 表示为一个树形数据结构。它包含网络文档中每个用户界面元素的一个节点。它非常有用，因为它允许 web 开发人员通过 JavaScript 修改内容，而且它采用结构化格式非常有帮助，因为我们可以选择特定的目标，并且所有的代码都变得更加容易处理。如果你想了解更多关于 DOM 的信息，请访问这个[链接。](https://www.geeksforgeeks.org/dom-document-object-model/)
**更新 DOM:** 如果你对 JavaScript 有所了解，那么你可能已经看到人们使用“getElementById()”或“getElementByClass()”方法来修改 DOM 的内容。每次应用程序的状态发生变化时，DOM get 都会更新，以反映用户界面的变化。虽然做这样的事情不是问题，并且它工作得很好，但是考虑这样一个情况，我们有一个包含大量节点的 DOM，并且所有这些 web 元素都有不同的样式和属性。由于 DOM 本身被表示为一棵树，所以在这里更新树并不是一个昂贵的操作，事实上我们有很多关于树的算法来快速更新。事实证明代价高昂的是，每次 DOM 更新时，更新后的元素及其子元素都必须再次呈现，以更新页面的用户界面。像这样，每次组件更新时，都需要更新 DOM，并且必须重新呈现用户界面组件。
**示例:**

## java 描述语言

```
// Simple getElementById() method
document.getElementById('some-id').innerValue = 'updated value';
```

在控制台或 JavaScript 文件中编写上述代码时，会发生以下情况:

*   浏览器解析 HTML，找到这个 id 的节点。
*   它移除这个特定元素的子元素。
*   用“更新的值”更新元素。
*   重新计算父节点和子节点的 CSS。
*   更新布局。
*   最后，遍历树并将其绘制在屏幕(浏览器)显示上。

因此，正如我们现在所知，更新 DOM 不仅涉及到更改内容，它还附带了更多内容。此外，重新计算 CSS 和改变布局涉及复杂的算法，它们确实会影响性能。因此，React 有一种不同的方法来处理这个问题，因为它使用了虚拟 DOM。

**虚拟 DOM:** React 使用虚拟 DOM exists，它就像是实际 DOM 的轻量级副本(DOM 的虚拟表示)。所以对于原始 DOM 中存在的每个对象，在 React Virtual DOM 中都有一个对象。它完全相同，但它没有直接更改文档布局的权力。操纵 DOM 很慢，但操纵虚拟 DOM 很快，因为屏幕上什么也画不出来。因此，每当我们的应用程序状态发生变化时，虚拟 DOM 会首先更新，而不是真正的 DOM。你可能还在想，“我们不是又在做同样的事情，把工作增加一倍吗？这怎么能更快呢？”阅读下面的内容，了解如何使用虚拟 DOM 来提高速度。

**虚拟 DOM 实际上是如何让事情变得更快的:**当任何新的东西被添加到应用程序中时，一个虚拟 DOM 被创建，并被表示为一棵树。应用程序中的每个元素都是该树中的一个节点。因此，每当任何元素的状态发生变化时，都会创建一个新的虚拟 DOM 树。然后，将这个新的虚拟 DOM 树与之前的虚拟 DOM 树进行比较，并记录更改。在此之后，它找到了对真正的 DOM 进行这些更改的最佳方法。现在，只有更新的元素会再次呈现在页面上。

【Virtual DOM 如何帮助反应:在反应中，无论是功能组件还是类组件，一切都被视为一个组件。一个组件可以包含一个状态。每次我们更改 JSX 文件中的内容，或者简单地说，每当任何组件的状态改变时，都会更新它的虚拟 DOM 树。虽然这听起来可能无效，但成本并不显著，因为更新虚拟 DOM 不需要太多时间。React 每次维护两个虚拟 DOM，一个包含更新后的虚拟 DOM，另一个只是这个更新后的虚拟 DOM 的预更新版本。现在，它将更新前的版本与更新后的虚拟 DOM 进行比较，并找出 DOM 中到底发生了什么变化，比如哪些组件发生了变化。将当前的虚拟 DOM 树与前一个进行比较的过程被称为**“区分”**。一旦 React 发现到底发生了什么变化，它就只在真实的 DOM 上更新这些对象。React 使用所谓的批处理更新来更新真实的 DOM。这只是意味着对真实 DOM 的更改是分批发送的，而不是针对组件状态的单一更改发送任何更新。我们已经看到用户界面的重新呈现是最昂贵的部分，React 通过确保 Real DOM 接收到批量更新来重新呈现用户界面，从而最有效地做到了这一点。将变更转换为真实 DOM 的整个过程称为**和解**

这极大地提高了性能，也是 React 及其虚拟 DOM 深受开发人员喜爱的主要原因。